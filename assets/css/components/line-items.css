/**
 * WP Flyout - Line Items Component
 * Clean, modern product selection and line item management
 *
 * @version 5.0.0
 */

.wp-flyout-line-items {
    margin: 16px 0;
}

/* ==========================================================================
   PRODUCT SELECTOR
   Flat, inline — feels like part of the table, not a separate card
   ========================================================================== */

.line-items-selector {
    display: flex;
    gap: 10px;
    align-items: center;
    padding: 12px 0;
    margin-bottom: 0;
    border-bottom: 1px solid #e0e0e0;
}

.line-items-selector .select2-container {
    flex: 1;
    min-width: 0;
}

/* Add item button — compact, aligned with select */
.line-items-selector button[data-action="add-item"] {
    cursor: pointer;
    transition: all 0.15s;
    white-space: nowrap;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    height: 28px;
    line-height: 26px;
    padding: 0 12px;
    font-size: 13px;
}

.line-items-selector button[data-action="add-item"]:active {
    transform: translateY(1px);
}

.line-items-selector button[data-action="add-item"]:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.line-items-selector button[data-action="add-item"] .dashicons {
    font-size: 16px;
    width: 16px;
    height: 16px;
    line-height: 16px;
}

/* Loading spinner */
.line-items-selector button .dashicons.spin {
    animation: li-spin 0.8s linear infinite;
}

@keyframes li-spin {
    to { transform: rotate(360deg); }
}

/* ==========================================================================
   TABLE
   Clean lines, no heavy borders or box shadows
   ========================================================================== */

.line-items-table {
    margin-bottom: 0;
}

.line-items-table table {
    width: 100%;
    border-collapse: collapse;
    margin: 0;
}

/* Header — light, understated */
.line-items-table thead th {
    padding: 10px 12px;
    text-align: left;
    font-weight: 500;
    font-size: 11px;
    color: #8c8f94;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    border-bottom: 1px solid #e0e0e0;
    background: none;
}

/* Rows */
.line-items-table tbody tr {
    border-bottom: 1px solid #f0f0f1;
    transition: background-color 0.1s;
}

.line-items-table tbody tr:last-child {
    border-bottom: 1px solid #e0e0e0;
}

.line-items-table tbody tr:hover {
    background: #fafafa;
}

.line-items-table td {
    padding: 12px;
    vertical-align: middle;
    font-size: 13px;
    color: #1e1e1e;
}

/* ==========================================================================
   COLUMNS
   ========================================================================== */

/* Item — name + thumbnail */
.column-item {
    width: auto;
}

.column-item > div {
    display: flex;
    align-items: center;
    gap: 10px;
}

.column-item span {
    font-weight: 500;
    line-height: 1.3;
}

/* Thumbnails */
.item-thumbnail {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 6px;
    flex-shrink: 0;
}

.item-thumbnail-placeholder {
    width: 40px;
    height: 40px;
    background: #f0f0f1;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #c3c4c7;
    flex-shrink: 0;
}

.item-thumbnail-placeholder .dashicons {
    font-size: 20px;
    width: 20px;
    height: 20px;
}

/* Quantity */
.column-quantity {
    width: 72px;
    text-align: center;
}

.column-quantity th {
    text-align: center;
}

.quantity-input {
    width: 56px;
    padding: 4px 6px;
    text-align: center;
    border: 1px solid #dcdcde;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 500;
    color: #1e1e1e;
    background: #fff;
    transition: border-color 0.15s;
}

.quantity-input:hover {
    border-color: #8c8f94;
}

.quantity-input:focus {
    border-color: #2271b1;
    box-shadow: 0 0 0 1px #2271b1;
    outline: none;
}

/* Price */
.column-price {
    width: 100px;
    text-align: right;
    color: #50575e;
    font-variant-numeric: tabular-nums;
}

.column-price th {
    text-align: right;
}

/* Editable price input */
.price-input {
    width: 80px;
    padding: 4px 6px;
    text-align: right;
    border: 1px solid #dcdcde;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 500;
    color: #1e1e1e;
    transition: border-color 0.15s;
}

.price-input:hover {
    border-color: #8c8f94;
}

.price-input:focus {
    border-color: #2271b1;
    box-shadow: 0 0 0 1px #2271b1;
    outline: none;
}

/* Total */
.column-total {
    width: 100px;
    text-align: right;
}

.column-total th {
    text-align: right;
}

.item-total {
    font-weight: 600;
    color: #1e1e1e;
    font-variant-numeric: tabular-nums;
}

/* Actions */
.column-actions {
    width: 40px;
    text-align: center;
}

.column-actions button[data-action="remove-item"] {
    padding: 4px;
    background: none;
    border: none;
    color: #c3c4c7;
    cursor: pointer;
    transition: color 0.15s;
    border-radius: 4px;
    line-height: 1;
}

.column-actions button[data-action="remove-item"]:hover {
    color: #d63638;
}

.column-actions button[data-action="remove-item"] .dashicons {
    font-size: 16px;
    width: 16px;
    height: 16px;
    display: block;
}

/* ==========================================================================
   EMPTY STATE
   ========================================================================== */

.line-items-empty {
    padding: 48px 24px;
    text-align: center;
    border: 1px dashed #dcdcde;
    border-radius: 6px;
    margin: 16px 0;
}

.line-items-empty p {
    margin: 0;
    font-size: 13px;
    color: #8c8f94;
}

.line-items-empty .dashicons {
    font-size: 32px;
    width: 32px;
    height: 32px;
    color: #dcdcde;
    margin-bottom: 8px;
}

/* ==========================================================================
   TOTAL
   Clean bottom bar, not a card
   ========================================================================== */

.line-items-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 12px;
    border-top: 2px solid #1e1e1e;
    margin-top: 0;
}

.total-label {
    font-size: 13px;
    font-weight: 600;
    color: #50575e;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.total-amount {
    font-size: 18px;
    font-weight: 700;
    color: #1e1e1e;
    font-variant-numeric: tabular-nums;
}

/* ==========================================================================
   STATES
   ========================================================================== */

/* Loading */
.wp-flyout-line-items.loading {
    position: relative;
    min-height: 120px;
}

.wp-flyout-line-items.loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 24px;
    height: 24px;
    margin: -12px 0 0 -12px;
    border: 2px solid #e0e0e0;
    border-top-color: #2271b1;
    border-radius: 50%;
    animation: li-spin 0.6s linear infinite;
}

/* Row highlight on add */
.line-item-highlight {
    animation: li-highlight 0.8s ease-out;
}

@keyframes li-highlight {
    0%   { background-color: #fcf9e8; }
    100% { background-color: transparent; }
}

/* Non-editable price */
.wp-flyout-line-items:not([data-editable-price="1"]) .column-price {
    font-variant-numeric: tabular-nums;
}

/* ==========================================================================
   RESPONSIVE
   ========================================================================== */

@media screen and (max-width: 782px) {
    .line-items-selector {
        flex-direction: column;
        align-items: stretch;
        padding: 12px 0;
    }

    .line-items-selector .select2-container {
        width: 100% !important;
    }

    .line-items-selector button {
        width: 100%;
        justify-content: center;
        height: 36px;
        line-height: 34px;
    }

    .line-items-table {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .line-items-table table {
        min-width: 500px;
    }

    .item-thumbnail,
    .item-thumbnail-placeholder {
        width: 32px;
        height: 32px;
    }

    .line-items-total {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
        padding: 12px;
    }

    .total-amount {
        font-size: 16px;
    }
}